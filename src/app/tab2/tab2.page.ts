import { Component, ViewChild } from '@angular/core';
import { IonicModule } from '@ionic/angular';
import { TransactionCardComponent } from '../components/transaction-card/transaction-card.component';

import {
  NgApexchartsModule,
  ChartComponent,
  ApexAxisChartSeries,
  ApexChart,
  ApexXAxis,
  ApexDataLabels,
  ApexTooltip,
  ApexStroke,
  ApexYAxis,
  ApexGrid,
  ApexFill,
  ApexOptions,
} from 'ng-apexcharts';

export type ChartOptions = {
  series: ApexAxisChartSeries;
  chart: ApexChart;
  xaxis: ApexXAxis;
  yaxis: ApexYAxis;
  stroke: ApexStroke;
  tooltip: ApexTooltip;
  grid: ApexGrid;
  dataLabels: ApexDataLabels;
  fill: ApexFill;
  floating: boolean;
};

@Component({
  selector: 'app-tab2',
  templateUrl: 'tab2.page.html',
  styleUrls: ['tab2.page.scss'],
  standalone: true,
  imports: [IonicModule, TransactionCardComponent, NgApexchartsModule],
})
export class Tab2Page {
  @ViewChild('chart') chart!: ChartComponent;
  visitors: any = {
    series: {
      'this-year': [
        {
          name: 'Visitors',
          data: [
            {
              x: '2022-10-03T10:05:09.935Z',
              y: 4884,
            },
            {
              x: '2022-10-06T10:05:09.936Z',
              y: 5351,
            },
            {
              x: '2022-10-09T10:05:09.936Z',
              y: 5293,
            },
            {
              x: '2022-10-12T10:05:09.936Z',
              y: 4908,
            },
            {
              x: '2022-10-15T10:05:09.936Z',
              y: 5027,
            },
            {
              x: '2022-10-18T10:05:09.936Z',
              y: 4837,
            },
            {
              x: '2022-10-21T10:05:09.936Z',
              y: 4484,
            },
            {
              x: '2022-10-24T10:05:09.936Z',
              y: 4071,
            },
            {
              x: '2022-10-27T10:05:09.936Z',
              y: 4124,
            },
            {
              x: '2022-10-30T10:05:09.936Z',
              y: 4563,
            },
            {
              x: '2022-10-31T10:05:09.936Z',
              y: 3820,
            },
            {
              x: '2022-11-03T10:05:09.936Z',
              y: 3968,
            },
            {
              x: '2022-11-06T10:05:09.936Z',
              y: 4102,
            },
            {
              x: '2022-11-09T10:05:09.936Z',
              y: 3941,
            },
            {
              x: '2022-11-12T10:05:09.936Z',
              y: 3566,
            },
            {
              x: '2022-11-15T10:05:09.936Z',
              y: 3853,
            },
            {
              x: '2022-11-18T10:05:09.936Z',
              y: 3853,
            },
            {
              x: '2022-11-21T10:05:09.936Z',
              y: 4069,
            },
            {
              x: '2022-11-24T10:05:09.936Z',
              y: 3879,
            },
            {
              x: '2022-11-27T10:05:09.936Z',
              y: 4298,
            },
            {
              x: '2022-12-05T10:05:09.936Z',
              y: 4355,
            },
            {
              x: '2022-12-08T10:05:09.936Z',
              y: 4065,
            },
            {
              x: '2022-12-11T10:05:09.936Z',
              y: 3650,
            },
            {
              x: '2022-12-14T10:05:09.936Z',
              y: 3379,
            },
            {
              x: '2022-12-17T10:05:09.936Z',
              y: 3191,
            },
            {
              x: '2022-12-20T10:05:09.936Z',
              y: 2968,
            },
            {
              x: '2022-12-23T10:05:09.936Z',
              y: 2957,
            },
            {
              x: '2022-12-26T10:05:09.936Z',
              y: 3313,
            },
            {
              x: '2022-12-29T10:05:09.936Z',
              y: 3708,
            },
            {
              x: '2023-01-01T10:05:09.936Z',
              y: 3586,
            },
            {
              x: '2023-01-02T10:05:09.936Z',
              y: 3965,
            },
            {
              x: '2023-01-05T10:05:09.936Z',
              y: 3901,
            },
            {
              x: '2023-01-08T10:05:09.936Z',
              y: 3410,
            },
            {
              x: '2023-01-11T10:05:09.936Z',
              y: 3748,
            },
            {
              x: '2023-01-14T10:05:09.936Z',
              y: 3929,
            },
            {
              x: '2023-01-17T10:05:09.936Z',
              y: 3846,
            },
            {
              x: '2023-01-20T10:05:09.936Z',
              y: 3771,
            },
            {
              x: '2023-01-23T10:05:09.936Z',
              y: 4015,
            },
            {
              x: '2023-01-26T10:05:09.936Z',
              y: 3589,
            },
            {
              x: '2023-01-29T10:05:09.936Z',
              y: 3150,
            },
            {
              x: '2023-01-30T10:05:09.936Z',
              y: 3050,
            },
            {
              x: '2023-02-02T10:05:09.936Z',
              y: 2574,
            },
            {
              x: '2023-02-05T10:05:09.936Z',
              y: 2823,
            },
            {
              x: '2023-02-08T10:05:09.936Z',
              y: 2848,
            },
            {
              x: '2023-02-11T10:05:09.936Z',
              y: 3000,
            },
            {
              x: '2023-02-14T10:05:09.936Z',
              y: 3216,
            },
            {
              x: '2023-02-17T10:05:09.936Z',
              y: 3299,
            },
            {
              x: '2023-02-20T10:05:09.936Z',
              y: 3768,
            },
            {
              x: '2023-02-23T10:05:09.936Z',
              y: 3524,
            },
            {
              x: '2023-02-26T10:05:09.936Z',
              y: 3918,
            },
            {
              x: '2023-02-27T10:05:09.936Z',
              y: 4145,
            },
            {
              x: '2023-03-02T10:05:09.936Z',
              y: 4378,
            },
            {
              x: '2023-03-05T10:05:09.936Z',
              y: 3941,
            },
            {
              x: '2023-03-08T10:05:09.936Z',
              y: 3932,
            },
            {
              x: '2023-03-11T10:05:09.936Z',
              y: 4380,
            },
            {
              x: '2023-03-14T10:05:09.936Z',
              y: 4243,
            },
            {
              x: '2023-03-17T10:05:09.936Z',
              y: 4367,
            },
            {
              x: '2023-03-20T11:05:09.936Z',
              y: 3879,
            },
            {
              x: '2023-03-23T11:05:09.936Z',
              y: 4357,
            },
            {
              x: '2023-03-26T11:05:09.936Z',
              y: 4181,
            },
            {
              x: '2023-04-03T11:05:09.936Z',
              y: 4619,
            },
            {
              x: '2023-04-06T11:05:09.936Z',
              y: 4769,
            },
            {
              x: '2023-04-09T11:05:09.936Z',
              y: 4901,
            },
            {
              x: '2023-04-12T11:05:09.936Z',
              y: 4640,
            },
            {
              x: '2023-04-15T11:05:09.936Z',
              y: 5128,
            },
            {
              x: '2023-04-18T11:05:09.936Z',
              y: 5015,
            },
            {
              x: '2023-04-21T11:05:09.936Z',
              y: 5360,
            },
            {
              x: '2023-04-24T10:05:09.936Z',
              y: 5608,
            },
            {
              x: '2023-04-27T10:05:09.936Z',
              y: 5272,
            },
            {
              x: '2023-04-30T10:05:09.936Z',
              y: 5660,
            },
            {
              x: '2023-05-01T10:05:09.936Z',
              y: 5836,
            },
            {
              x: '2023-05-04T10:05:09.936Z',
              y: 5659,
            },
            {
              x: '2023-05-07T10:05:09.936Z',
              y: 5575,
            },
            {
              x: '2023-05-10T10:05:09.936Z',
              y: 5474,
            },
            {
              x: '2023-05-13T10:05:09.936Z',
              y: 5427,
            },
            {
              x: '2023-05-16T10:05:09.936Z',
              y: 5865,
            },
            {
              x: '2023-05-19T10:05:09.936Z',
              y: 5700,
            },
            {
              x: '2023-05-22T10:05:09.936Z',
              y: 6052,
            },
            {
              x: '2023-05-25T10:05:09.936Z',
              y: 5760,
            },
            {
              x: '2023-05-28T10:05:09.936Z',
              y: 5648,
            },
            {
              x: '2023-06-05T10:05:09.936Z',
              y: 5435,
            },
            {
              x: '2023-06-08T10:05:09.936Z',
              y: 5239,
            },
            {
              x: '2023-06-11T10:05:09.936Z',
              y: 5452,
            },
            {
              x: '2023-06-14T10:05:09.936Z',
              y: 5416,
            },
            {
              x: '2023-06-17T10:05:09.936Z',
              y: 5195,
            },
            {
              x: '2023-06-20T10:05:09.936Z',
              y: 5119,
            },
            {
              x: '2023-06-23T10:05:09.936Z',
              y: 4635,
            },
            {
              x: '2023-06-26T10:05:09.936Z',
              y: 4833,
            },
            {
              x: '2023-06-29T10:05:09.936Z',
              y: 4584,
            },
            {
              x: '2023-07-02T10:05:09.936Z',
              y: 4822,
            },
            {
              x: '2023-07-03T10:05:09.936Z',
              y: 4582,
            },
            {
              x: '2023-07-06T10:05:09.936Z',
              y: 4348,
            },
            {
              x: '2023-07-09T10:05:09.936Z',
              y: 4132,
            },
            {
              x: '2023-07-12T10:05:09.936Z',
              y: 4099,
            },
            {
              x: '2023-07-15T10:05:09.936Z',
              y: 3849,
            },
            {
              x: '2023-07-18T10:05:09.936Z',
              y: 4010,
            },
            {
              x: '2023-07-21T10:05:09.936Z',
              y: 4486,
            },
            {
              x: '2023-07-24T10:05:09.937Z',
              y: 4403,
            },
            {
              x: '2023-07-27T10:05:09.937Z',
              y: 4141,
            },
            {
              x: '2023-07-30T10:05:09.937Z',
              y: 3780,
            },
            {
              x: '2023-07-31T10:05:09.937Z',
              y: 3524,
            },
            {
              x: '2023-08-03T10:05:09.937Z',
              y: 3212,
            },
            {
              x: '2023-08-06T10:05:09.937Z',
              y: 3568,
            },
            {
              x: '2023-08-09T10:05:09.937Z',
              y: 3800,
            },
            {
              x: '2023-08-12T10:05:09.937Z',
              y: 3796,
            },
            {
              x: '2023-08-15T10:05:09.937Z',
              y: 3870,
            },
            {
              x: '2023-08-18T10:05:09.937Z',
              y: 3745,
            },
            {
              x: '2023-08-21T10:05:09.937Z',
              y: 3751,
            },
            {
              x: '2023-08-24T10:05:09.937Z',
              y: 3310,
            },
            {
              x: '2023-08-27T10:05:09.937Z',
              y: 3509,
            },
            {
              x: '2023-09-04T10:05:09.937Z',
              y: 3187,
            },
            {
              x: '2023-09-07T10:05:09.937Z',
              y: 2918,
            },
            {
              x: '2023-09-10T10:05:09.937Z',
              y: 3191,
            },
            {
              x: '2023-09-13T10:05:09.937Z',
              y: 3437,
            },
            {
              x: '2023-09-16T10:05:09.937Z',
              y: 3291,
            },
            {
              x: '2023-09-19T10:05:09.937Z',
              y: 3317,
            },
            {
              x: '2023-09-22T10:05:09.937Z',
              y: 3716,
            },
            {
              x: '2023-09-25T10:05:09.937Z',
              y: 3260,
            },
            {
              x: '2023-09-28T10:05:09.937Z',
              y: 3694,
            },
            {
              x: '2023-10-01T10:05:09.937Z',
              y: 3598,
            },
          ],
        },
      ],
      'last-year': [
        {
          name: 'Visitors',
          data: [
            {
              x: '2022-10-03T10:05:09.937Z',
              y: 2021,
            },
            {
              x: '2022-10-06T10:05:09.937Z',
              y: 1749,
            },
            {
              x: '2022-10-09T10:05:09.937Z',
              y: 1654,
            },
            {
              x: '2022-10-12T10:05:09.937Z',
              y: 1900,
            },
            {
              x: '2022-10-15T10:05:09.937Z',
              y: 1647,
            },
            {
              x: '2022-10-18T10:05:09.937Z',
              y: 1315,
            },
            {
              x: '2022-10-21T10:05:09.937Z',
              y: 1807,
            },
            {
              x: '2022-10-24T10:05:09.937Z',
              y: 1793,
            },
            {
              x: '2022-10-27T10:05:09.937Z',
              y: 1892,
            },
            {
              x: '2022-10-30T10:05:09.937Z',
              y: 1846,
            },
            {
              x: '2022-10-31T10:05:09.937Z',
              y: 1804,
            },
            {
              x: '2022-11-03T10:05:09.937Z',
              y: 1778,
            },
            {
              x: '2022-11-06T10:05:09.937Z',
              y: 2015,
            },
            {
              x: '2022-11-09T10:05:09.937Z',
              y: 1892,
            },
            {
              x: '2022-11-12T10:05:09.937Z',
              y: 1708,
            },
            {
              x: '2022-11-15T10:05:09.937Z',
              y: 1711,
            },
            {
              x: '2022-11-18T10:05:09.938Z',
              y: 1570,
            },
            {
              x: '2022-11-21T10:05:09.938Z',
              y: 1507,
            },
            {
              x: '2022-11-24T10:05:09.938Z',
              y: 1451,
            },
            {
              x: '2022-11-27T10:05:09.938Z',
              y: 1522,
            },
            {
              x: '2022-12-05T10:05:09.938Z',
              y: 1977,
            },
            {
              x: '2022-12-08T10:05:09.938Z',
              y: 2367,
            },
            {
              x: '2022-12-11T10:05:09.938Z',
              y: 2798,
            },
            {
              x: '2022-12-14T10:05:09.938Z',
              y: 3080,
            },
            {
              x: '2022-12-17T10:05:09.938Z',
              y: 2856,
            },
            {
              x: '2022-12-20T10:05:09.938Z',
              y: 2745,
            },
            {
              x: '2022-12-23T10:05:09.938Z',
              y: 2750,
            },
            {
              x: '2022-12-26T10:05:09.938Z',
              y: 2728,
            },
            {
              x: '2022-12-29T10:05:09.938Z',
              y: 2436,
            },
            {
              x: '2023-01-01T10:05:09.938Z',
              y: 2289,
            },
            {
              x: '2023-01-02T10:05:09.938Z',
              y: 2804,
            },
            {
              x: '2023-01-05T10:05:09.938Z',
              y: 2777,
            },
            {
              x: '2023-01-08T10:05:09.938Z',
              y: 3024,
            },
            {
              x: '2023-01-11T10:05:09.938Z',
              y: 2657,
            },
            {
              x: '2023-01-14T10:05:09.938Z',
              y: 2218,
            },
            {
              x: '2023-01-17T10:05:09.938Z',
              y: 1964,
            },
            {
              x: '2023-01-20T10:05:09.938Z',
              y: 1674,
            },
            {
              x: '2023-01-23T10:05:09.938Z',
              y: 1721,
            },
            {
              x: '2023-01-26T10:05:09.938Z',
              y: 2005,
            },
            {
              x: '2023-01-29T10:05:09.938Z',
              y: 1613,
            },
            {
              x: '2023-01-30T10:05:09.938Z',
              y: 1071,
            },
            {
              x: '2023-02-02T10:05:09.939Z',
              y: 1079,
            },
            {
              x: '2023-02-05T10:05:09.939Z',
              y: 1133,
            },
            {
              x: '2023-02-08T10:05:09.939Z',
              y: 1536,
            },
            {
              x: '2023-02-11T10:05:09.939Z',
              y: 2016,
            },
            {
              x: '2023-02-14T10:05:09.939Z',
              y: 2256,
            },
            {
              x: '2023-02-17T10:05:09.939Z',
              y: 1934,
            },
            {
              x: '2023-02-20T10:05:09.939Z',
              y: 1832,
            },
            {
              x: '2023-02-23T10:05:09.939Z',
              y: 2075,
            },
            {
              x: '2023-02-26T10:05:09.939Z',
              y: 1709,
            },
            {
              x: '2023-02-27T10:05:09.939Z',
              y: 1831,
            },
            {
              x: '2023-03-02T10:05:09.939Z',
              y: 1434,
            },
            {
              x: '2023-03-05T10:05:09.939Z',
              y: 1293,
            },
            {
              x: '2023-03-08T10:05:09.939Z',
              y: 1064,
            },
            {
              x: '2023-03-11T10:05:09.939Z',
              y: 1080,
            },
            {
              x: '2023-03-14T10:05:09.939Z',
              y: 1032,
            },
            {
              x: '2023-03-17T10:05:09.939Z',
              y: 1280,
            },
            {
              x: '2023-03-20T11:05:09.939Z',
              y: 1344,
            },
            {
              x: '2023-03-23T11:05:09.939Z',
              y: 1835,
            },
            {
              x: '2023-03-26T11:05:09.939Z',
              y: 2287,
            },
            {
              x: '2023-04-03T11:05:09.939Z',
              y: 2692,
            },
            {
              x: '2023-04-06T11:05:09.939Z',
              y: 2250,
            },
            {
              x: '2023-04-09T11:05:09.939Z',
              y: 1814,
            },
            {
              x: '2023-04-12T11:05:09.939Z',
              y: 1906,
            },
            {
              x: '2023-04-15T11:05:09.939Z',
              y: 1973,
            },
            {
              x: '2023-04-18T11:05:09.939Z',
              y: 1882,
            },
            {
              x: '2023-04-21T11:05:09.939Z',
              y: 2333,
            },
            {
              x: '2023-04-24T10:05:09.939Z',
              y: 2048,
            },
            {
              x: '2023-04-27T10:05:09.939Z',
              y: 2547,
            },
            {
              x: '2023-04-30T10:05:09.939Z',
              y: 2884,
            },
            {
              x: '2023-05-01T10:05:09.939Z',
              y: 2771,
            },
            {
              x: '2023-05-04T10:05:09.939Z',
              y: 2522,
            },
            {
              x: '2023-05-07T10:05:09.939Z',
              y: 2543,
            },
            {
              x: '2023-05-10T10:05:09.939Z',
              y: 2413,
            },
            {
              x: '2023-05-13T10:05:09.939Z',
              y: 2002,
            },
            {
              x: '2023-05-16T10:05:09.939Z',
              y: 1838,
            },
            {
              x: '2023-05-19T10:05:09.939Z',
              y: 1830,
            },
            {
              x: '2023-05-22T10:05:09.939Z',
              y: 1872,
            },
            {
              x: '2023-05-25T10:05:09.939Z',
              y: 2246,
            },
            {
              x: '2023-05-28T10:05:09.939Z',
              y: 2171,
            },
            {
              x: '2023-06-05T10:05:09.939Z',
              y: 2988,
            },
            {
              x: '2023-06-08T10:05:09.939Z',
              y: 2694,
            },
            {
              x: '2023-06-11T10:05:09.939Z',
              y: 2806,
            },
            {
              x: '2023-06-14T10:05:09.939Z',
              y: 3040,
            },
            {
              x: '2023-06-17T10:05:09.939Z',
              y: 2898,
            },
            {
              x: '2023-06-20T10:05:09.939Z',
              y: 3013,
            },
            {
              x: '2023-06-23T10:05:09.939Z',
              y: 2760,
            },
            {
              x: '2023-06-26T10:05:09.939Z',
              y: 3021,
            },
            {
              x: '2023-06-29T10:05:09.939Z',
              y: 2688,
            },
            {
              x: '2023-07-02T10:05:09.939Z',
              y: 2572,
            },
            {
              x: '2023-07-03T10:05:09.939Z',
              y: 2789,
            },
            {
              x: '2023-07-06T10:05:09.939Z',
              y: 3069,
            },
            {
              x: '2023-07-09T10:05:09.939Z',
              y: 3142,
            },
            {
              x: '2023-07-12T10:05:09.939Z',
              y: 3614,
            },
            {
              x: '2023-07-15T10:05:09.939Z',
              y: 3202,
            },
            {
              x: '2023-07-18T10:05:09.939Z',
              y: 2730,
            },
            {
              x: '2023-07-21T10:05:09.939Z',
              y: 2951,
            },
            {
              x: '2023-07-24T10:05:09.939Z',
              y: 3267,
            },
            {
              x: '2023-07-27T10:05:09.939Z',
              y: 2882,
            },
            {
              x: '2023-07-30T10:05:09.939Z',
              y: 2885,
            },
            {
              x: '2023-07-31T10:05:09.939Z',
              y: 2915,
            },
            {
              x: '2023-08-03T10:05:09.939Z',
              y: 2790,
            },
            {
              x: '2023-08-06T10:05:09.939Z',
              y: 3071,
            },
            {
              x: '2023-08-09T10:05:09.939Z',
              y: 2802,
            },
            {
              x: '2023-08-12T10:05:09.939Z',
              y: 2382,
            },
            {
              x: '2023-08-15T10:05:09.939Z',
              y: 1883,
            },
            {
              x: '2023-08-18T10:05:09.939Z',
              y: 1448,
            },
            {
              x: '2023-08-21T10:05:09.939Z',
              y: 1176,
            },
            {
              x: '2023-08-24T10:05:09.939Z',
              y: 1275,
            },
            {
              x: '2023-08-27T10:05:09.939Z',
              y: 1136,
            },
            {
              x: '2023-09-04T10:05:09.939Z',
              y: 1160,
            },
            {
              x: '2023-09-07T10:05:09.939Z',
              y: 1524,
            },
            {
              x: '2023-09-10T10:05:09.939Z',
              y: 1305,
            },
            {
              x: '2023-09-13T10:05:09.939Z',
              y: 1725,
            },
            {
              x: '2023-09-16T10:05:09.939Z',
              y: 1850,
            },
            {
              x: '2023-09-19T10:05:09.939Z',
              y: 2304,
            },
            {
              x: '2023-09-22T10:05:09.939Z',
              y: 2187,
            },
            {
              x: '2023-09-25T10:05:09.939Z',
              y: 2597,
            },
            {
              x: '2023-09-28T10:05:09.939Z',
              y: 2246,
            },
            {
              x: '2023-10-01T10:05:09.939Z',
              y: 1767,
            },
          ],
        },
      ],
    },
  };

  chartValue: string = 'this-year';

  public chartOptions!: ApexOptions;
  currentDate: Date = new Date();

  constructor() {
    this.chartOptions = {
      series: this.visitors.series,
      chart: {
        animations: {
          enabled: true,
          speed: 400,
          animateGradually: {
            enabled: false,
          },
        },
        // sparkline: {
        //   enabled: true,
        // },
        fontFamily: 'inherit',
        foreColor: 'inherit',
        width: '100%',
        height: '100%',
        type: 'area',
        toolbar: {
          show: false,
        },
        zoom: {
          enabled: false,
        },
      },
      dataLabels: {
        enabled: false,
      },
      fill: {
        // colors: ['#312E81'],
      },
      stroke: {
        width: 2,
      },
      grid: {
        show: false,
        borderColor: '#334155',
        padding: {
          top: 10,
          bottom: -40,
          left: 0,
          right: 0,
        },
        position: 'back',
        xaxis: {
          lines: {
            show: true,
          },
        },
      },
      xaxis: {
        axisBorder: {
          show: true,
        },
        axisTicks: {
          show: true,
        },
        crosshairs: {
          stroke: {
            color: '#475569',
            dashArray: 0,
            width: 2,
          },
        },
        labels: {
          // offsetY: -15,
          style: {
            colors: '#666666',
          },
        },
        tickAmount: 20,
        tooltip: {
          enabled: false,
        },
        type: 'datetime',
      },
      yaxis: {
        show: false,
        labels: { show: false },
        axisTicks: {
          show: false,
        },
        axisBorder: {
          show: false,
        },
        min: (min): number => min - 750,
        max: (max): number => max + 250,
        tickAmount: 5,
      },
      tooltip: {
        x: {
          format: 'dd/MM/yy HH:mm',
        },
      },
    };
  }

  public generateData(baseval: any, count: any, yrange: any) {
    let i = 0;
    let series = [];
    while (i < count) {
      let x = Math.floor(Math.random() * (750 - 1 + 1)) + 1;
      let y =
        Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min;
      let z = Math.floor(Math.random() * (75 - 15 + 1)) + 15;

      series.push([x, y, z]);
      baseval += 86400000;
      i++;
    }
    return series;
  }
}
